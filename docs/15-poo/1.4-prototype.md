# Programaci√≥n Orientada a Objetos en JS {docsify-ignore-all}

## Prototype

**Houston, tenemos un problema!** las propiedades pueden tomar valores √∫nicos, pero en el caso de los m√©todos, estamos repitiendo las mismas funciones una y otra vez, para cada objeto, rompiendo el principio [DRY](https://medium.com/entendiendo-javascript/currying-en-javascript-funciones-con-superpoderes-1c8760c728a)).

**Soluci√≥n:** mover los m√©todos a otro objeto (√∫nico) y que el int√©rprete, en el caso de que no los encuentre en los objetos anteriores, los busque en este otro.

```js
const cat = {
  sound: 'meow!'
}

cat.talk();
```

```js
const cat = {
  sound: 'meow!'
}

const animal = {
  talk() {
    console.log(this.sound);
  }
}

Object.setPrototypeOf(cat, animal);
cat.talk();
```

En JS, utilizamos **prototipos** para delegar caracter√≠sticas (propiedades) y comportamiento (m√©todos) a otros objetos.

Las propiedades propias de un objeto (es decir, las que est√°n definidas en √©l) tienen precedencia sobre las propiedades de su prototipo que tengan el mismo nombre

El prototipo de un objeto act√∫a como **fallback**, es decir, si JS no encuentra una propiedad en un objeto, va a buscarla a su prototipo y sino al prototipo del prototipo, etc...

Esto se conoce como **Prototype Chain**. Esta cadena termina con el prototipo de `Object`, `Object.prototype`, que es `null`, porque `null` no es un objeto y por lo tanto no puede tener una propiedad `__proto__`

Podemos utilizar el m√©todo `hasOwnProperty()` para diferenciar entre las propiedades propias de un objeto de las propiedades que hereda de su prototipo (`in` en cambio nos dice si una propiedad pertenece a la cadena de prototipos de un objeto)

Podemos **aumentar** o **extender** el prototipo de una funci√≥n constructora (√≥ [**Factory Function**](https://www.theodinproject.com/courses/javascript/lessons/factory-functions-and-the-module-pattern?ref=lnav)) ya existente modificando su propiedad `prototype` y todos los objetos creados con esta funci√≥n tendr√°n las nuevas propiedades

```js
function Dog() {}

Dog.prototype.breed = 'Bulldog';

const myDog = new Dog();
myDog.breed
myDog.__proto__
// prototype s√≥lo existe en las funciones
myDog.prototype
Dog.prototype

function Giraffe() {}
Giraffe.prototype

const koala = {};
// prototype es una propiedad que contiene un objeto
koala.prototype
koala.__proto__
// __proto__ es una referencia, no un objeto
koala.__proto__ === Object.prototype
```

### Ejercicio

Ejecutar el siguiente c√≥digo en la consola y analizar qu√© pasa y por qu√©

```js
// caso 1
const arr = [];
arr.__proto__ = null;

arr.push(1);
```

```js
// caso 2
const arr = [];
arr.__proto__.push = function() {
  console.log('Nope üòà');
}

arr.push(1);
arr.push('a');
```

```js
// caso 3
const arr = [];
arr.__proto__ = {}

arr.push(1);
```

```js
// caso 4
const arr = [];
delete arr.__proto__.push;

arr.push(1);
```